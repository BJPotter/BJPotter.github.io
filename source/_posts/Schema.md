---
title:  Schema设计
tag: 数据库
---

## 什么是Schema设计

>Schema设计指的是对数据库表的设计

## Schema设计目标

**可用的设计目标**

>对需求深刻理解，知道存储哪些数据能够保证业务流程顺利进行，并且使用合适的数据类型进行存储，保证所设计的数据库和数据表能够支撑当前的业务需求，且在技术实现上没有弊端，那它是可用的。

**好用的设计目标**

>随业务规模变大，数据量规模也会有所上升，如何保持较高的性能，如将通用信息单独使用一张表存储，建立适当索引等。

## Schema设计原则

>+ 数据库表名称，列名称，数据库名称都要用小写
>+ 名称有意义，多个单词之间用下划线连接，名称不要过长
>+ 够用且尽量小（数据库类型满足需求的前提下选择占用空间少的，减少用户存储空间和索引空间）
>+ 不使用物理外键
>+ 表一定要有主键
>+ 保持一致编码字符集，如数据库、数据表、数据列字符集都应该是utf8或者utf8mb4

## 库设计规范

**创建数据库语句**

```sql
create database if not exists databases_name;
```

**一个库应该存储多少张表**

>不要超过200个表，几十到100更适宜，表越多，需要维护的表结构越多，同时存储的数据量越大会给数据库造成很大压力，一旦出现损失，丢失的数据量也就越多。

## 表设计规范

**范式和反范式**

>范式化它的核心是数据只出现一次，不存在冗余数据，反范式破了这个规则，有冗余数据的存在

**范式的优缺点**

>+ 使用更少的存储空间
>+ 由于没有冗余数据，增删改查速度快
>+ 由于不存在冗余数据，稍微复杂的业务可能要做好几张表的关联

**三大范式**

>1NF: 字段不可分，原子性，字段不可以再分，否则就不是关系型数据库
>
>2NF: 有主键，非主键字段依赖主键，唯一性，一个表说明一个事物
>
>3NF: 非主键字段之间不能依赖，每列都和主键有直接关系，但是不能传递依赖关系，各个非主键字段不能互相传递

**宽表窄表**

>mysql对于每个表有4096列的限制，真正使用的限制取决于引擎，对于innodb来说，限制1017列
>
>宽表：超过40列的表，数据量比较大，占用存储空间多，降低排序分组的性能。
>
>窄表：少于40列的表，数据列比较分散，编写关联查询难度大。

**索引合理使用**

>建立索引，能够加速表的数据查询，它也会占据一定的存储空间，缺点就是以空间换查询时间，与此同时插入，删除，更新的性能都会下降，要追求空间和时间的平衡，既不占用过多的存储空间，也保持较高的性能。