---
title: 数据库的数据类型与使用
tag: 数据库
---

## 数据类型的说明

>数据类型定义了数据库的列可以存储什么样类型的数据以及当前数据存储的基本规则，从mysql的角度出发，数据类型是为了方便对数据进行分类，使用统一的方式进行有效管理，更好的利用有限的空间。

## 数据类型分类

>mysql的数据类型通常分为四类
>
>1. 字符串类型，如char、varchar、text，用于存储字符、字符串数据
>2. 日期/时间类型，如date、time、datetime、timestamp,用于存储时间或者日期，这种数据类型比较难选。
>3. 数值类型，如tinyint、int 、bigint、float 、double、decimal,用于存储整数或者小数
>4. 二进制类型，tityblob、blob、mediumblob、longblob，用于存储二进制数据

## 使用建议

#### 字符串类型

>**1.char数据类型**
>
>char数据类型用于存储固定长度的字符串，长度位于1-255之间，当存储字符串的长度未达到指定固定的长度，就会用空格填充造成空间浪费。
>
>char类型实际应用有手机号、身份证号。
>
>**2.varchar数据类型**
>
>varchar数据类型定义的是一个可变长度的字符串，长度位于0-65535，存储的字符串长度不能超过所指定的长度，且最大长度不能超过65535，对于长度不固定的用varchar数据类型比较合适。
>
>varchar类型的实际应用：姓名、邮箱等
>
>>**char和varchar的区别：**
>>
>>（1）char指定了长度后，如果存储字符的长度不足，就会用空格补充，查询的时候再将空格去掉，所以char类型的存储的字符串不能有空格，varchar不受此限制。
>>
>>（2）由于char的长度固定，不论存入多少，都会占用固定长度的字节，但是varchar存入的字节数是存入字符数的+1（长度小于255）或者+2（长度大于255）
>>
>>（3）由于char的长度是固定的，不需要考虑边界问题，检索速度快于varchar
>
>**3.tinytext、text、mediumtext、longtext数据类型**
>
>mysql提供了四种文本数据类型，都属于可变长字符串，唯一不同的是存储空间不同
>
>tinytext 2^8-1
>
>text 2^16-1
>
>mediuntext 2^24-1
>
>longtext 2^32-1
>
>当存储的数据量过大时，就要考虑用文本了，当数据量超过500就应该使用文本，文本类型不能有默认值，且创建索引的时候要指定前多少个字符。

#### 日期/时间类型

>**1.date数据类型**
>
>>date数据类型用于存储日期，存储范围为'1000-01-01'-'9999-12-31',只能用于存储年月日
>>
>>适合场景：出生日期
>
>**2.time数据类型**
>
>>用于存储时间，不仅能够表示一天中的时间，也可以用于表示两个时间的间隔。存储范围是'-838:59:59'-'838:59:59',time还可以按照“D HH:MM:SS”格式存储，D的取值是0-34
>>
>>适合场景：具体时间
>
>**3.datetime数据类型**
>
>>日期和时间的组合
>>
>>适合场景：数据插入时间和订单完成时间等等。
>
>**4.timestamp数据类型**
>
>>用于存储日期和时间的数据，取值范围‘1970-01-01 00:00:01.000000’ UTC 到 ‘2038-01-19 03:14:07.999999’ UTC,它与datetime时间范围相比较少，和时区相关，当插入时间的时候，会先转换成本地时区，在存储，查询时间时，会先转换为本地时区在显示，不同时区看到的同一时间时不一样的
>
>**注意：**datetime最佳选择，时间范围足够大，不管是只要时间还是日期在代码中处理即可，避免需求变更对数据库表进行改动。

#### 数值类型

**1.整数类型**

| 数据类型  | 占据空间 | 范围（有符号）   | 范围（无符号）           | 描述       |
| --------- | -------- | ---------------- | ------------------------ | ---------- |
| tinyint   | 1字节    | -2^7 - 2^7 - 1   | 0 - 127                  | 小整数值   |
| smallint  | 2字节    | -2^15 - 2^15 -1  | 0 - 65535                | 大整数值   |
| mediumint | 3 字节   | -2^23 - 2^23 - 1 | 0 - 16777215             | 大整数值   |
| int       | 4 字节   | -2^31 - 2^31 - 1 | 0 - 4294967295           | 大整数值   |
| bigint    | 8 个字节 | -2^63 - 2^63-1   | 0 - 18446744073709551615 | 极大整数值 |

>上述几种数据类型除了取值范围不同，其他的并没有本质的区别，在使用上选择足够大的空间就可以了，还有一个特性就是：显示宽度
>
>```sql
>`a` bigint(20) NOT NULL COMMENT 'a',
>`b` int(11) NOT NULL COMMENT 'b'
>```
>
>20和11就是可选宽度，当b定义11时，如果存储宽度小于11会自动用空格补齐，定义宽度并不会影响字段的大小和存储值的范围



**2.浮点类型**

>mysql支持两个浮点类型，float,double,float用于单精度浮点数，占用4个字节，double时双精度浮点数，占用8个字节，他们只能保存近似值，所以通常叫非标准类型，float相对于double来说，占用内存少，精度较低，取值范围较小。
>
>float(M,D),其中M是显示长度，D是定义的小数的位数，默认值是float(10,2),10是数字的总长包括小数位数，2是小数的位数，小数精度可以到24个精度。
>
>double(M,D)M和D的含义和float一样，默认值是double(16,4),它的小数精度可以到53位

3.定点类型

>mysql中decimal被称为定点数据类型，由于它保存的是精确值，通常用于精度要求非常高的计算，也可以利用decimal保存比bigint更大的整数值。
>
>cpu不支持对decimal的数据类型进行计算，mysql自身实现了对decimal的高精度计算，底层实现方面，mysql将decimal的数据类型的数字使用二进制字符串进行存储，每4个字节存储9个数字。如果存储位数不够，则小数补0，但是，如果超出位数，就会报错。
>
>由于decimal需要比较大的空间和计算开销，他的计算效率没有float和double那么高，所以要求精确计算的场景下才会考虑使用decimal.

#### 二进制类型

>二进制类型理论上可以存储任何数据，如：文件、图片、其他多媒体数据，二进制数据类型相对于其他数据类型来
>
>说，使用频率较低，mysql一共提供了四种二进制数据类型，tityblob、blob、mediumblob、longblob他们的区别在于存储数据的范围不同
>
>+ tityblob 最大支持255字节
>+ blob 最大支持64kb
>+ mediumblob 最大支持 16MB
>+ longblob 最大支持4GB
>
>mysql提供并支持大文件存储，这样会降低数据库的性能，谨慎使用，能不用尽量不用

## 使用技巧

>**1 使用not null 且带有comment**
>
>>mysql的索引值为null时，会额外占用存储空间，另外进行比较和运算时，需要对null进行特殊处理，效率低
>>
>>comment就是列的注释，方便以后查阅
>
>**2 使用存储需要最小的数据类型**
>
>>满足需求的前提下，选取最小的数据类型。
>>
>>可以选择tinyiny存储事件状态，可以使用smallint存储班级人数，并不需要都选择int进行存储。
>>
>>关于最小的数据类型的优势：
>>
>>+ 越小的数据类型，占用磁盘、内存、cpu缓存都会更小、存取速度也会更快
>>+ 小的数据类型建立索引所需要的空间也相对的较少，这样一页中存储的索引节点数量也就越多，遍历的时候io就越少，索引的性能就越好。
>
>**3 选择简单的数据类型**
>
>能用int就不用varchar
>
>**4 存储订单金额小数直接用decimal**
>
>**5 尽量避免使用text和blob**
>
>>mysql临时表并不支持text和blob这样的大数据类型，如果要查询这样的数据，则排序操作必须使用临时表，性能会下降很多。mysql对索引长度又限制，text类型只能用到前缀索引，并且由于存储的时指针，text列上不能有默认值。

