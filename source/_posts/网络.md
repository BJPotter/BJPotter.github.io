---
title: 网络
tag:
- Network
typora-root-url: ./..
---

# OSI模型

<img src="/images/OSI.drawio.svg" style="zoom:70%;" />

# TCP/IP模型

![](/images/TCP_IP.drawio.svg)

**注意：首先提出的是OSI的7层模型，在7层模型的基础上，将上3层和下两层分别简化为应用层和网络接口层，由于OSI七层模型不好实现，实际应用都是TCP/IP四层模型。**

# 物理层

## 作用

>将数字信号转换为电信号，通过物理媒介（光纤、电缆、无线电波等）传输编码后的数据比特流。

## 协议

| 协议      | 作用                                                         |
| --------- | ------------------------------------------------------------ |
| Ethernet  | Ethernet协议提供了一种标准的物理连接方式，通常使用双绞线、光纤等介质将计算机和网络设备（如交换机、路由器）连接起来。计算机可以通过物理连接加入到一个局域网（LAN）或广域网（WAN）中。 |
| Wi-Fi     | 提供无线连接和数据传输的能力，使设备可以通过无线方式连接到互联网或局域网，实现网络访问和数据交换 |
| RS-232    | 一种常用的串行通信接口标准，常被用于计算机和外部设备（如调制解调器、串口打印机、串口扫描仪等）之间进行数据传输 |
| Bluetooth | 一种无线通信技术，它通过无线方式将不同设备连接在一起，实现数据传输和通信 |
| USB       | 提供了一种通用的、高速、可靠的数据传输和设备连接方式，广泛应用于各类计算机和电子设备中 |

# 数据链路层

## 作用

>负责传输数据帧，提供了对物理层传输错误的检测和纠正，控制发送端向接收端的传输数据帧的速率进行流量控制。

## 协议

| 协议     | 作用                                                         |
| -------- | ------------------------------------------------------------ |
| Ethernet | Ethernet协议规定了计算机和网络设备之间的数据传输方式，如数据的编码和解码方法、数据帧的格式等。它使得计算机可以通过有线网络连接，并能够在网络中传输数据。 |
| PPP      | 提供了一种点对点连接的通信机制，用于建立和管理点对点连接，并支持可靠的数据传输 |
| ARP      | 将特定的IP地址解析为相应的MAC地址，以便在局域网中进行数据通信。它通过广播ARP请求和相应的ARP响应来建立和维护IP地址和MAC地址之间的映射关系，以实现设备之间的有效通信。 |
| RARP     | 通常需要搭建一个RARP服务器，在这个服务器上注册设备的MAC和IP，设备会请求RARP服务器，我的MAC是**请返回IP。 |

**注意：ARP是已知 IP 地址求 MAC 地址，RARP是已知 MAC 地址求 IP 地址**

# 网络层

## 作用

>负责将数据包的传输，提供了路由和转发功能。

## 协议

### IP协议

#### 作用

通过IP地址进行主机标识与定位、实现数据包的路由和交换、支持网络间的通信以及提供灵活的寻址机制，为互联网的正常运行和数据的传输提供了基础。

#### IP与MAC的关系

ip是两个网络之间通信所使用的，MAC则是直连的两个设备之间的使用

#### ip地址的定义

IP地址（ipv4）由32位正整数表示，IP地址在计算机中用二进制处理，人们便于计算用十进制标记

#### 什么是广播

>定义：同一个链路中，相互连接的主机发送数据包

**分类**

+ 本地广播：本网段内的广播
+ 直接广播：跨网段的广播

#### ip地址的分类

>IP地址由网络号+主机号组成，网络号定义了范围，主机号定义了个数，最大主机数为2的主机号的幂-2，为什么-2，其中255地址用于广播，0是网络地址不可以分配给主机。

+ A类：范围0-127
+ B类：范围128-191
+ C类：范围192-223
+ D类：范围224-239
+ E类：范围240-255

D类地址用于IP多播，将包发送给特定组内的所有主机，整个范围分为3个部分（1.局域网中组播，路由器是不会进行转发的 2.互联网上的组播 3.本地管理组播地址，仅在特定的本地范围内有效）。

E类地址用于保留



#### 无分类IP地址CIDR

>分类地址的概念，32 位的 IP 地址被划分为两部分，前面是网络号，后面是主机号。a.b.c.d/x，其中 /x 表示前 x 位属于网络号， x 的范围是 0 ~ 32

#### 公网ip与私网ip

>A类、B类、C类都有一部分私有IP地址

#### ip地址与路由控制

>IP地址的网络地址这一部分是用于进行路由控制。路由表中下一跳决定了路径怎么走

#### ip分片和重组

>每种链路都有一个最大的传输单元MTU,以太网的最大传输单元是1500字节，如果ip数据包超过1500字节就会切片，进行切片传输，由目标主机进行重组，如果丢失部分切片，则整个IP数据包报废，因此TCP引入了MSS，在TCP层进行切片，不在ip层切片

#### ipv6基础

>由来：IPv4 的地址是 32 位的，大约可以提供 42 亿个地址，目前已经耗尽，IPv6 地址长度是 128 位，是以每 16 位作为一组，每组用冒号 「:」 隔开。

#### ipv6的改进

1. 取消选项字段： 删除该选项字段使的 IPv6 的首部成为固定长度的 40 字节，传输更快
2. 取消了分片/重新组装相关字段：分片与重组是耗时的过程，IPv6 不允许在中间路由器进行分片与重组，这种操作只能在源与目标主机，这将大大提高了路由器转发的速度
3. 取消了首部校验和字段： 因为在数据链路层和传输层都会校验，因此 IPv6 直接取消了 IP 的校验。

### NAT协议

#### 作用

>网络地址转换 NAT，将私网地址转换为公网地址

#### 由来

>IPV4资源短缺

#### NAPT

> NAT是将私网地址转换成公网地址，NAPT是将私网+端口号转变成公网地址+端口号，这种转换技术就叫网络地址与端口转换 NAPT。

#### 缺点

1. 外部无法主动与 NAT 内部服务器建立连接，因为 NAPT 转换表没有转换记录
2. 转换表的生成会产生性能开销。
3. 通信过程中，如果 NAT 路由器重启了，所有的 TCP 连接都将被重置

>解决方案：
>
>1. ipv6
>2. NAT 穿透技术

### ICMP协议

> ICMP 全称是 Internet Control Message Protocol，也就是互联网控制消息协议。

#### 功能

1. 报告错误
2. 网络诊断

#### 报文类型

1. 查询报文类型： 用于诊断的查询消息（0 回送应答、8 回送请求）
2. 差错报文类型： 通知出错原因的错误消息（3 目标不可达、5 重定向或改变路由、11 超时）

### OSPF协议

>OSPF协议用于在自治系统内部实现动态路由选择和路径计算。它通过计算最短路径、动态路由更新、负载均衡和管理网络拓扑等功能，提供了高效、可靠和灵活的路由方案

### BGP协议

>它使得不同自治系统之间能够交换路由信息，并根据应用策略和属性选择最佳路径。通过提供路由策略、容错性和弹性等功能，BGP协议实现了互联网中的自治系统之间的高效、灵活和可靠的路由选择。

# 传输层

## 作用

>在源节点和目标节点之间建立端到端的通信连接。

## 协议

### TCP协议

>

### UDP协议

# 会话层

## 作用

>负责建立、管理和终止会话（会话是指两个应用程序之间的通信过程），提供了会话管理和同步功能。

## 协议

| 协议 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| SSH  | 一种安全的远程登录和文件传输协议，它提供了数据加密、身份验证和安全传输的功能。通过SSH协议，用户可以远程登录到远程计算机或服务器上，并进行命令执行、文件传输和远程管理等操作，保证了远程操作过程中的安全性和可靠性 |
| SIP  | 一种用于建立、修改和终止多媒体会话的通信协议。它提供多媒体会话的管理和控制功能，支持注册、定位、会话协商、呼叫控制和路由等功能，使得用户可以通过多种终端进行实时的多媒体通信 |
| RDP  | 允许用户通过网络远程访问和控制远程计算机的桌面环境。它提供了远程控制、远程支持、虚拟化和远程桌面服务、数据安全和跨平台支持的功能 |



# 表示层

## 作用

>负责数据的表示、编码和加密，确保数据能够在不同系统之间正确解释和理解。

## 协议

| 协议    | 作用                                                         |
| ------- | ------------------------------------------------------------ |
| JPEG    | 它提供了图像压缩、多媒体应用、压缩质量调节、颜色空间支持和逐行扫描等功能 |
| MPEG    | 主要应用于视频和音频的压缩、传输和存储。它提供了视频压缩、视频传输和存储、视频流媒体和互联网传输以及音频压缩和编码的功能 |
| SSL/TLS | 提供了数据传输加密、身份验证、服务器安全、统一资源定位和加密套件协商等功能 |

# 应用层

## 作用

>负责提供各种网络服务和应用，如电子邮件、文件传输、远程登录和网页浏览等。

## 协议

### HTTP

### DNS

### FTP

### DHCP

### IMAP

### SMTP
