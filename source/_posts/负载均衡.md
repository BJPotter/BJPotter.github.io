---
title: 负载均衡
description: 学习什么是负载均衡以及8种负载均衡算法
date: 2022-02-03
tag: 
- 系统设计
- 算法

---

# 什么是负载均衡

>负载均衡（Load Balance）主要将不同客户端的请求流量平均分配到后端服务器

## 负载均衡的优点

1. 资源利用最大化：通过将传入的网络流量均匀分发到后端服务器，负载均衡器能够防止单个服务器的过载，从而使资源利用达到最大。

2. 高可用性和可靠性：在分布式系统中，如果一个服务器出现故障，负载均衡器可以将流量路由到其他的服务器，从而增加了整体系统的可用性和可靠性。

## 负载均衡的工作原理

用户对应用程序的请求首先转到负载均衡器。然后，负载均衡器会将每个请求路由到服务器场中最适合处理该请求的单个服务器。

## 负载均衡的8种算法

### Round Robin

> 轮询法是最简单的负载均衡算法。它将请求顺序分发给服务器列表中的每个服务器。所有服务器的负载都是均等的，这种策略适用于所有服务器处理能力相同的情况。

### Least Connections

> 最少连接法是一种动态负载均衡方法，它将新请求发送到当前打开的连接数最少的服务器。这种策略适用于处理能力不同的多服务器环境。

### Weighted Round Robin

> 加权轮询法是圆形轮循法的扩展版，它基于每个服务器的处理能力（权重）分配请求。权重越大，分配的请求越多。权重通常由管理员根据服务器性能设置。

### Weighted Least Connections

> 加权最小连接法是最少连接法的扩展版，与最少连接法不同，该算法会考虑服务器的权重。这意味着新请求将更可能发送到权重较高的服务器。

### IP Hash

> IP Hash法将客户端IP地址转变为一个服务器列表中的索引，使得来自同一IP地址的请求总会发送到相同的服务器。此策略适用于需要会话保持的服务器处理。

### Least Response Time

> 最小响应时间法根据每个服务器的响应时间来分配请求。它通常会将请求发送到响应时间最短的服务器，适用于处理能力不同的多服务器环境。

### Random

> 随机法简单地将请求随机分配给服务器列表中的服务器。一般在服务器处理能力相同且服务器数量较多的情况下使用。

### Least Bandwidth

> 最小带宽法将请求发送到过去一段时间内使用带宽最少的服务器。此策略的目标是最大程度地利用网络资源，保证网络带宽的合理使用。

<img src="/images/负载均衡算法.png" alt="负载均衡算法" style="zoom:50%;" />

## 负载均衡器的类型

1. 硬件负载均衡器：这是传统的负载均衡器，存在于数据中心，作为独立的物理设备。它们具有专门的处理能力，用于优化网络流量分配。硬件负载均衡器因其可靠性和高性能而被许多大型企业所使用。

2. 软件负载均衡器：软件负载均衡器可以在物理服务器或虚拟机上安装和运行。它们提供了更多的灵活性和配置选项，并且可以用作虚拟负载均衡器。如Nginx和HAProxy都是流行的软件负载均衡器选项。

3. 全局服务负载均衡（GSLB）：全局服务负载均衡涉及在地理上不同的数据中心之间分配流量。GSLB通常使用DNS技术根据位置、服务器健康状况、全局策略等因素来指导流量。

4. 本地负载均衡：与GSLB相对，本地负载均衡器分配内部网络中的流量。例如，LAN或WAN中的多台服务器可以通过本地负载均衡器进行负载平衡。

5. 网络层负载均衡（Layer 4）：这类负载均衡器基于数据链路层（第2层）和传输层（第4层）信息，如IP地址和TCP/UDP端口，进行简单的负载分发决策。

6. 应用层负载均衡（Layer 7）：这类负载均衡器工作在OSI模型的应用层，可以读取HTTP头信息，因此它们可以进行更复杂的路由决策，例如根据HTTP头信息、Cookies、URI等进行流量分发。

7. 云负载均衡：云服务提供商提供负载均衡服务，该服务能够跨云环境的多个实例分配流量。这种服务通常是分布式的、可扩展的，并可实施多种复杂的分配策略。

## 负载均衡技术有哪些类型？

>负载均衡器技术类型有两种分别是硬件负载均衡器和软件负载均衡器。

### 硬件负载均衡器

>基于硬件的负载均衡器是一种硬件设备，可以安全地处理千兆字节的流量并将其重定向到数百个不同的服务器。可以将其存储在数据中心，使用虚拟化创建多个可以集中管理的数字或虚拟负载均衡器。

### 软件负载均衡器

>基于软件的负载均衡器是执行所有负载均衡功能的应用程序。您可以将它们安装在任何服务器上，也可作为完全托管的第三方服务的形式访问。















